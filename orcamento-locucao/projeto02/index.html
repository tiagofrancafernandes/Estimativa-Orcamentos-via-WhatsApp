<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Or√ßamento de Locu√ß√£o</title>
  <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
</head>
<body class="bg-gray-100 text-gray-800 p-6">

  <div class="max-w-3xl mx-auto bg-white shadow-xl rounded-2xl p-6 space-y-6" x-data="locucaoForm()">
    <h1 class="text-2xl font-bold text-center">Solicita√ß√£o de Or√ßamento de Locu√ß√£o</h1>

    <!-- Tipo de item -->
    <div>
      <label class="block font-semibold mb-2">Tipo de Locu√ß√£o</label>
      <select class="w-full p-3 rounded border" x-model="tipo">
        <option disabled selected value="">Selecione</option>
        <option value="Pe√ßa comercial">Pe√ßa comercial</option>
        <option value="Propaganda eleitoral">Propaganda eleitoral</option>
        <option value="Aviso">Aviso</option>
        <option value="Nota de falecimento">Nota de falecimento</option>
        <option value="Outros">Outros</option>
      </select>
    </div>

    <!-- Tom -->
    <div>
      <label class="block font-semibold mb-2">Tom da Narra√ß√£o</label>
      <select class="w-full p-3 rounded border" x-model="tom">
        <option disabled selected value="">Selecione</option>
        <option>Natural</option>
        <option>Alegre</option>
        <option>S√©rio</option>
      </select>
    </div>

    <!-- Velocidade -->
    <div>
      <label class="block font-semibold mb-2">Velocidade</label>
      <select class="w-full p-3 rounded border" x-model="velocidade">
        <option disabled selected value="">Selecione</option>
        <option>Lenta</option>
        <option>Normal</option>
        <option>R√°pida</option>
      </select>
    </div>

    <!-- Texto ou quantidade -->
    <div>
      <label class="block font-semibold mb-2">Texto para narra√ß√£o</label>
      <textarea x-show="!informarDepois" class="w-full p-3 rounded border" rows="4" placeholder="Digite aqui o texto..." x-model="texto"></textarea>

      <label class="flex items-center gap-2 mt-3">
        <input type="checkbox" x-model="informarDepois" />
        Informarei o texto posteriormente
      </label>

      <div x-show="informarDepois" class="mt-3">
        <label class="block mb-2 font-semibold">Quantidade aproximada de palavras</label>
        <select class="w-full p-3 rounded border" x-model="quantidadePalavras">
          <option disabled selected value="">Selecione</option>
          <option>At√© 30</option>
          <option>De 30 a 50</option>
          <option>De 50 a 100</option>
          <option>Mais de 100</option>
        </select>
      </div>
    </div>

    <!-- Estimativa e Enviar -->
    <div class="bg-gray-50 p-4 rounded-xl border text-center space-y-3">
      <p class="text-lg font-medium">üí∞ Estimativa: <span class="font-bold text-green-600" x-text="`R$ ${valorEstimado}`"></span></p>

      <button @click="enviarWhatsApp" class="bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg font-semibold shadow transition">
        Enviar or√ßamento por WhatsApp
      </button>
    </div>
  </div>

  <script>
    document.addEventListener('alpine:init', () => {
      Alpine.data('locucaoForm', () => ({
        tipo: '',
        tom: '',
        velocidade: '',
        texto: '',
        informarDepois: false,
        quantidadePalavras: '',
        get valorEstimado() {
          let base = 50;
          if (this.tipo === 'Propaganda eleitoral') base += 30;
          if (this.tipo === 'Nota de falecimento') base -= 10;
          if (this.velocidade === 'R√°pida') base += 10;
          if (this.tom === 'Alegre') base += 5;
          if (this.informarDepois) {
            if (this.quantidadePalavras === 'De 50 a 100') base += 30;
            else if (this.quantidadePalavras === 'Mais de 100') base += 50;
            else if (this.quantidadePalavras === 'De 30 a 50') base += 20;
            else base += 10;
          } else {
            if (this.texto.length > 300) base += 40;
            else if (this.texto.length > 150) base += 25;
          }
          return base;
        },
        enviarWhatsApp() {
          let msg = `*Pedido de Or√ßamento de Locu√ß√£o*\n\n` +
                    `*Tipo:* ${this.tipo}\n` +
                    `*Tom:* ${this.tom}\n` +
                    `*Velocidade:* ${this.velocidade}\n`;

          if (this.informarDepois) {
            msg += `*Texto:* _Informado posteriormente_\n` +
                   `*Quantidade:* ${this.quantidadePalavras}\n`;
          } else {
            msg += `*Texto:* > ${this.texto}\n`;
          }

          msg += `\n*Valor estimado:* R$ ${this.valorEstimado}`;

          const numero = '5599999999999'; // Substitua pelo n√∫mero real (com DDI)
          const url = `https://wa.me/${numero}?text=${encodeURIComponent(msg)}`;
          window.open(url, '_blank');
        }
      }))
    })
  </script>

</body>
</html>
